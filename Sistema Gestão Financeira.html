<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de GestÃ£o Financeira v30 - Categorias DinÃ¢micas</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='20' cy='20' r='10' fill='%234f46e5'/><circle cx='80' cy='30' r='8' fill='%234f46e5'/><circle cx='50' cy='70' r='12' fill='%234f46e5'/><line x1='20' y1='20' x2='80' y2='30' stroke='%234f46e5' stroke-width='5'/><line x1='80' y1='30' x2='50' y2='70' stroke='%234f46e5' stroke-width='5'/></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
    <script type="module">
        import { api, API_BASE_URL } from './js/api.js?v=1.1';
        import { getToken } from './js/auth.js?v=1.1';

        // Garante que o jsPDF esteja disponÃ­vel
        window.jsPDF = window.jspdf.jsPDF;

        // VersÃ£o do cÃ³digo para debug
        console.log("ðŸ”§ Sistema Financeiro v1.1 - Carregado");

        // Torna api e funÃ§Ãµes acessÃ­veis globalmente
        window.api = api;
        window.API_BASE_URL = API_BASE_URL;
        window.getToken = getToken;

        // Declara loadDataFromCloud como global para ser acessÃ­vel em ambos os DOMContentLoaded
        let loadDataFromCloud;

        document.addEventListener('DOMContentLoaded', async () => {
            console.log("âœ… DOMContentLoaded iniciado");
            const getById = id => document.getElementById(id);

            // Estado Inicial
            let state = {
                eventos: [],
                gastos: [],
                contas: [],
                contasFixas: [],
                selectedMonth: new Date().toISOString().slice(0, 7) // YYYY-MM
            };

            // Atribui a funÃ§Ã£o Ã  variÃ¡vel global
            loadDataFromCloud = async function () {
                try {
                    console.log("â˜ï¸ Sincronizando com o servidor...");
                    console.log("ðŸ“ URL da API:", api ? "API carregada" : "API nÃ£o carregada");

                    // Busca TUDO em paralelo para ser rÃ¡pido
                    const [
                        eventosCloud,
                        transacoesCloud,
                        contasCloud,
                        fixasCloud,
                        catGastos,
                        catFixas,
                        monitoresCloud,
                        pagamentosCloud,
                        funcionariosCloud,
                        faixasCloud
                    ] = await Promise.all([
                        window.api.getEventos(),
                        window.api.getTransacoes(),
                        window.api.getContas(),
                        window.api.getContasFixas(),
                        window.api.getCategoriasGastos(),
                        window.api.getCategoriasFixas(),
                        window.api.getMonitores(),
                        window.api.getPagamentosMonitores(),
                        window.api.getFuncionarios(),
                        window.api.getFaixasComissao()
                    ]);

                    console.log("ðŸ“Š Dados recebidos:", {
                        eventos: eventosCloud?.length || 0,
                        transacoes: transacoesCloud?.length || 0,
                        contas: contasCloud?.length || 0,
                        contasFixas: fixasCloud?.length || 0,
                        catGastos: catGastos?.length || 0,
                        catFixas: catFixas?.length || 0,
                        monitores: monitoresCloud?.length || 0,
                        pagamentos: pagamentosCloud?.length || 0,
                        funcionarios: funcionariosCloud?.length || 0,
                        faixas: faixasCloud?.length || 0
                    });

                    // 1. Mapeia Eventos
                    state.eventos = eventosCloud.map(evt => ({
                        id: evt.id.toString(),
                        data: evt.date,
                        empresa: "Aero Festas",
                        contratante: evt.clientName,
                        local: "",
                        items: evt.items?.map(i => ({ nome: i.toy?.name, valor: 0 })) || [],
                        valor: evt.price || 0,
                        isSynced: true
                    }));

                    // 2. Mapeia Gastos e Pagamentos (Separando pelo tipo/categoria)
                    state.gastos = transacoesCloud
                        .filter(t => t.type === 'EXPENSE' && !t.category?.includes('SalÃ¡rio') && !t.description?.includes('Pgto Monitor'))
                        .map(t => ({
                            id: t.id,
                            data: t.date,
                            descricao: t.description,
                            categoria: t.category || "Geral",
                            contaId: t.accountId,
                            conta: "Caixa",
                            pagamento: t.paymentMethod || "Outro",
                            valor: t.amount,
                            comprovantes: []
                        }));

                    // 3. Mapeia Contas BancÃ¡rias
                    state.contas = contasCloud.map(c => ({
                        id: c.id, nome: c.name, banco: c.bank, tipo: c.type, agencia: c.agency, numero: c.number
                    }));

                    // 4. Mapeia Contas Fixas (Cadastros)
                    state.contasFixas = fixasCloud.map(c => {
                        let anexos = [];
                        try {
                            if (c.attachments) {
                                anexos = typeof c.attachments === 'string' ? JSON.parse(c.attachments) : c.attachments;
                            }
                        } catch (e) {
                            console.warn('Erro ao parsear anexos da conta fixa:', c.id, e);
                            anexos = [];
                        }

                        return {
                            id: c.id,
                            descricao: c.description,
                            valor: c.amount,
                            diaVencimento: c.dueDay,
                            categoria: c.category,
                            tipoRecorrencia: c.recurrenceType || 'permanente',
                            dataInicio: c.startDate,
                            numParcelas: c.installments,
                            anexos: anexos
                        };
                    });

                    // 5. Mapeia Categorias de Gastos
                    state.gastoCategorias = catGastos.map(c => ({ id: c.id, nome: c.name }));

                    // 6. Mapeia Categorias de Contas Fixas
                    state.contaFixaCategorias = catFixas.map(c => ({ id: c.id, nome: c.name }));

                    // 7. Mapeia MONITORES
                    state.monitores = monitoresCloud.map(m => {
                        let habilidades = null;
                        try {
                            habilidades = m.habilidades ? JSON.parse(m.habilidades) : null;
                        } catch (e) {
                            console.warn('Erro ao parsear habilidades:', m.id, e);
                        }

                        return {
                            id: m.id,
                            nome: m.nome,
                            nascimento: m.nascimento,
                            telefone: m.telefone,
                            email: m.email,
                            endereco: m.endereco,
                            observacoes: m.observacoes,
                            cnh: m.cnh,
                            cnhCategoria: m.cnhCategoria,
                            fotoPerfil: m.fotoPerfil,
                            fotoDocumento: m.fotoDocumento,
                            habilidades: habilidades || { forca: 5, agilidade: 5, proatividade: 5, comunicacao: 5, disponibilidade: 5, respeito: 5 },
                            desempenho: m.desempenho || []
                        };
                    });

                    // 8. Mapeia PAGAMENTOS DE MONITORES
                    state.pagamentosMonitores = pagamentosCloud.map(p => ({
                        id: p.id,
                        data: p.data,
                        monitorId: p.monitorId,
                        nome: p.nome,
                        valorBase: p.valorBase,
                        adicional: p.adicional,
                        horasExtras: p.horasExtras,
                        pagamento: p.pagamento,
                        statusPagamento: p.statusPagamento,
                        horaEntrada: p.horaEntrada,
                        horaSaida: p.horaSaida,
                        numEventos: p.numEventos
                    }));

                    // 9. Mapeia FUNCIONÃRIOS
                    state.funcionarios = funcionariosCloud.map(f => ({
                        id: f.id,
                        nome: f.nome,
                        salarioFixo: f.salarioFixo,
                        va: f.va,
                        vt: f.vt
                    }));

                    // 10. Mapeia FAIXAS DE COMISSÃƒO
                    state.faixasComissao = faixasCloud.map(fx => ({
                        id: fx.id,
                        ateValor: fx.ateValor,
                        percentual: fx.percentual
                    }));

                    // 11. Se categorias estiverem vazias, popular com dados padrÃ£o
                    if (catGastos.length === 0 || catFixas.length === 0) {
                        console.log("âš ï¸ Categorias vazias! Populando banco de dados...");
                        try {
                            const token = getToken ? getToken() : null;
                            const seedRes = await fetch(`${API_BASE_URL}/api/finance/seed-categories`, {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                    'Authorization': token ? `Bearer ${token}` : ''
                                }
                            });
                            if (seedRes.ok) {
                                console.log("âœ… Categorias padrÃ£o criadas! Recarregando...");
                                const [newCatGastos, newCatFixas] = await Promise.all([
                                    window.api.getCategoriasGastos(),
                                    window.api.getCategoriasFixas()
                                ]);
                                state.gastoCategorias = newCatGastos.map(c => ({ id: c.id, nome: c.name }));
                                state.contaFixaCategorias = newCatFixas.map(c => ({ id: c.id, nome: c.name }));
                            }
                        } catch (seedError) {
                            console.error("Erro ao popular categorias:", seedError);
                        }
                    }

                    // 12. Se funcionÃ¡rios/faixas estiverem vazios, popular dados padrÃ£o
                    if (funcionariosCloud.length === 0 || faixasCloud.length === 0) {
                        console.log("âš ï¸ Dados de salÃ¡rio vazios! Populando banco...");
                        try {
                            const token = getToken ? getToken() : null;
                            const seedRes = await fetch(`${API_BASE_URL}/api/finance/seed-salarios`, {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                    'Authorization': token ? `Bearer ${token}` : ''
                                }
                            });
                            if (seedRes.ok) {
                                console.log("âœ… Dados de salÃ¡rio criados! Recarregando...");
                                const [newFunc, newFaixas] = await Promise.all([
                                    window.api.getFuncionarios(),
                                    window.api.getFaixasComissao()
                                ]);
                                state.funcionarios = newFunc.map(f => ({ id: f.id, nome: f.nome, salarioFixo: f.salarioFixo, va: f.va, vt: f.vt }));
                                state.faixasComissao = newFaixas.map(fx => ({ id: fx.id, ateValor: fx.ateValor, percentual: fx.percentual }));
                            }
                        } catch (seedError) {
                            console.error("Erro ao popular salÃ¡rios:", seedError);
                        }
                    }

                    console.log("ðŸ“‹ State final apÃ³s carregar tudo:", {
                        eventos: state.eventos.length,
                        gastos: state.gastos.length,
                        contas: state.contas.length,
                        contasFixas: state.contasFixas.length,
                        gastoCategorias: state.gastoCategorias.length,
                        contaFixaCategorias: state.contaFixaCategorias.length,
                        monitores: state.monitores.length,
                        pagamentosMonitores: state.pagamentosMonitores.length,
                        funcionarios: state.funcionarios.length,
                        faixasComissao: state.faixasComissao.length
                    });

                    console.log("âœ… Dados sincronizados!");
                    renderAll(); // Atualiza tudo (grÃ¡ficos, tabelas, etc.)

                } catch (error) {
                    console.error("âŒ Erro ao carregar dados do servidor:", error);
                    console.error("Detalhes do erro:", error.message, error.stack);
                    showToast("Erro ao conectar com o servidor. Verifique o console.", true);
                }
            };

            // Torna a funÃ§Ã£o acessÃ­vel globalmente tambÃ©m via window
            window.loadDataFromCloud = loadDataFromCloud;

            // --- 2. RENDERIZAÃ‡ÃƒO ---
            const renderAll = () => {
                const monthInput = getById('month-filter-global');
                if (monthInput) monthInput.value = state.selectedMonth;

                // Filtra dados pelo mÃªs selecionado
                const gastosMes = state.gastos.filter(g => g.data.startsWith(state.selectedMonth));
                const eventosMes = state.eventos.filter(e => e.data.startsWith(state.selectedMonth));

                // Atualiza Cards do Dashboard
                const receita = eventosMes.reduce((acc, e) => acc + (e.valor || 0), 0);
                const despesa = gastosMes.reduce((acc, g) => acc + (g.valor || 0), 0);
                const saldo = receita - despesa;

                getById('total-receitas').textContent = formatarMoeda(receita);
                getById('total-despesas').textContent = formatarMoeda(despesa);

                const elSaldo = getById('saldo-total');
                elSaldo.textContent = formatarMoeda(saldo);
                elSaldo.className = `text-4xl font-bold ${saldo >= 0 ? 'text-blue-600' : 'text-red-600'}`;

                // Renderiza Tabela de Gastos
                const tbodyGastos = getById('tabela-gastos')?.querySelector('tbody');
                if (tbodyGastos) {
                    if (gastosMes.length === 0) {
                        tbodyGastos.innerHTML = '<tr><td colspan="7" class="text-center py-4 text-gray-500">Nenhum gasto neste mÃªs.</td></tr>';
                    } else {
                        tbodyGastos.innerHTML = gastosMes.sort((a, b) => new Date(a.data) - new Date(b.data)).map(g => `
                                <tr>
                                    <td>${formatarData(g.data)}</td>
                                    <td>${g.descricao}</td>
                                    <td>${g.categoria}</td>
                                    <td>${g.conta}</td>
                                    <td>${g.pagamento}</td>
                                    <td class="font-bold text-red-600">${formatarMoeda(g.valor)}</td>
                                    <td><span class="text-gray-400 text-xs">Salvo</span></td>
                                </tr>
                            `).join('');
                    }
                }

                // Renderiza Tabela de Entradas (Eventos)
                const tbodyEventos = getById('tabela-eventos')?.querySelector('tbody');
                if (tbodyEventos) {
                    if (eventosMes.length === 0) {
                        tbodyEventos.innerHTML = '<tr><td colspan="7" class="text-center py-4 text-gray-500">Nenhuma entrada neste mÃªs.</td></tr>';
                    } else {
                        tbodyEventos.innerHTML = eventosMes.sort((a, b) => new Date(a.data) - new Date(b.data)).map(e => `
                                <tr>
                                    <td>${formatarData(e.data)}</td>
                                    <td>${e.empresa}</td>
                                    <td>${e.contratante}</td>
                                    <td>-</td>
                                    <td>Itens do Evento</td>
                                    <td class="font-bold text-green-600">${formatarMoeda(e.valor)}</td>
                                    <td><span class="text-gray-400 text-xs">Salvo</span></td>
                                </tr>
                            `).join('');
                    }
                }
            };

            // --- 3. EXPORTAR PDF ELEGANTE (Integrado) ---
            const exportarGastosPDF = () => {
                try {
                    const { jsPDF } = window.jspdf;
                    const doc = new jsPDF({ orientation: 'portrait', unit: 'pt', format: 'a4' });

                    // Filtra dados do mÃªs atual
                    const gastosFiltrados = state.gastos
                        .filter(g => g.data.startsWith(state.selectedMonth))
                        .sort((a, b) => new Date(a.data) - new Date(b.data));

                    if (gastosFiltrados.length === 0) {
                        showToast("NÃ£o hÃ¡ gastos neste mÃªs para exportar.", true);
                        return;
                    }

                    // --- CabeÃ§alho Elegante ---
                    doc.setFont('helvetica', 'bold');
                    doc.setFontSize(20);
                    doc.setTextColor(63, 81, 181);
                    doc.text('RelatÃ³rio de Gastos', 40, 55);

                    doc.setDrawColor(79, 70, 229);
                    doc.setLineWidth(1);
                    doc.line(40, 65, 555, 65);

                    doc.setFont('helvetica', 'normal');
                    doc.setFontSize(10);
                    doc.setTextColor(90, 90, 90);
                    doc.text(`Empresa: Aero & ABC Festas`, 40, 80);

                    const [ano, mes] = state.selectedMonth.split('-');
                    doc.text(`PerÃ­odo: ${mes}/${ano}`, 40, 95);

                    // Prepara dados para a tabela
                    const tableColumn = ["Data", "DescriÃ§Ã£o", "Categoria", "Pgto", "Valor"];
                    const tableRows = [];
                    let total = 0;

                    gastosFiltrados.forEach(g => {
                        total += parseFloat(g.valor || 0);
                        tableRows.push([
                            formatarData(g.data),
                            g.descricao,
                            g.categoria,
                            g.pagamento,
                            { content: formatarMoeda(g.valor), styles: { halign: 'right', fontStyle: 'bold', textColor: [220, 38, 38] } } // Vermelho para gastos
                        ]);
                    });

                    // Linha de Total
                    tableRows.push([
                        { content: "TOTAL GERAL", colSpan: 4, styles: { halign: 'right', fontStyle: 'bold', fillColor: [240, 240, 240] } },
                        { content: formatarMoeda(total), styles: { halign: 'right', fontStyle: 'bold', fillColor: [240, 240, 240] } }
                    ]);

                    // --- Tabela Estilizada ---
                    doc.autoTable({
                        head: [tableColumn],
                        body: tableRows,
                        startY: 115,
                        theme: 'grid',
                        styles: { fontSize: 10, cellPadding: 6, lineColor: [220, 220, 220], textColor: [40, 40, 40] },
                        headStyles: { fillColor: [63, 81, 181], textColor: 255, fontStyle: 'bold', halign: 'center' },
                        columnStyles: { 4: { halign: 'right' } }, // Alinha valor Ã  direita
                        alternateRowStyles: { fillColor: [250, 250, 255] },
                        margin: { left: 40, right: 40 },
                    });

                    // RodapÃ©
                    const pageCount = doc.internal.getNumberOfPages();
                    for (let i = 1; i <= pageCount; i++) {
                        doc.setPage(i);
                        doc.setFontSize(9);
                        doc.setTextColor(150);
                        doc.text(`PÃ¡gina ${i} de ${pageCount}`, doc.internal.pageSize.width - 80, doc.internal.pageSize.height - 20);
                    }

                    doc.save(`Relatorio_Gastos_${state.selectedMonth}.pdf`);
                    showToast("PDF gerado com sucesso!", false);

                } catch (err) {
                    console.error('Erro PDF:', err);
                    showToast('Erro ao gerar PDF.', true);
                }
            };

            // --- LISTENERS ---
            getById('export-gastos-pdf-btn').addEventListener('click', exportarGastosPDF);

            getById('month-filter-global').addEventListener('change', (e) => {
                state.selectedMonth = e.target.value;
                renderAll();
            });

            // Setas de navegaÃ§Ã£o de mÃªs
            document.querySelectorAll('.month-nav-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const dir = parseInt(btn.dataset.direction);
                    const [y, m] = state.selectedMonth.split('-').map(Number);
                    const newDate = new Date(y, m - 1 + dir, 1);
                    state.selectedMonth = newDate.toISOString().slice(0, 7);
                    renderAll();
                });
            });

            // FunÃ§Ãµes Auxiliares
            const formatarMoeda = val => new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(val);
            const formatarData = str => { if (!str) return '-'; const p = str.split('-'); return `${p[2]}/${p[1]}/${p[0]}`; };
            const showToast = (msg, isError) => {
                const toast = getById('toast');
                if (toast) {
                    getById('toast-message').textContent = msg;
                    toast.className = `fixed bottom-5 right-5 flex items-center text-white px-5 py-3 rounded-lg shadow-xl z-50 ${isError ? 'bg-red-600' : 'bg-green-600'}`;
                    toast.classList.remove('hidden');
                    setTimeout(() => toast.classList.add('hidden'), 3000);
                }
            };

            // INICIA TUDO
            loadDataFromCloud();
        });
    </script>



    <style>
        :root {
            --glow-color: hsl(224, 88%, 66%);
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5;
            color: #1f2937;
        }

        #particles-js {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .header-title {
            background: linear-gradient(to right, #4f46e5, #a855f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 800;
            text-shadow: 0 0 15px rgba(139, 92, 246, 0.2);
        }

        .glassmorphism {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(12px) saturate(180%);
            -webkit-backdrop-filter: blur(12px) saturate(180%);
            border: 1px solid rgba(200, 200, 200, 0.3);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
        }

        .modal-box.glassmorphism {
            background: rgba(255, 255, 255, 0.85);
        }

        .shiny-btn {
            position: relative;
            border: 2px solid transparent;
            background-image: linear-gradient(to right, #4f46e5 0%, #3b82f6 51%, #4f46e5 100%);
            background-size: 200% auto;
            color: white;
            box-shadow: 0 4px 15px 0 rgba(60, 78, 224, 0.4);
            transition: all 0.4s ease;
        }

        .shiny-btn:hover {
            background-position: right center;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px 0 rgba(60, 78, 224, 0.6);
        }

        .shiny-btn-red {
            position: relative;
            border: 2px solid transparent;
            background-image: linear-gradient(to right, #dc2626 0%, #ef4444 51%, #dc2626 100%);
            background-size: 200% auto;
            color: white;
            box-shadow: 0 4px 15px 0 rgba(239, 68, 68, 0.4);
            transition: all 0.4s ease;
        }

        .shiny-btn-red:hover {
            background-position: right center;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px 0 rgba(239, 68, 68, 0.6);
        }

        .shiny-btn-red:disabled {
            background-image: none;
            background-color: #9ca3af;
            box-shadow: none;
            cursor: not-allowed;
            opacity: 0.7;
        }

        .shiny-btn:disabled {
            background-image: none;
            background-color: #9ca3af;
            box-shadow: none;
            cursor: not-allowed;
            opacity: 0.7;
        }

        .form-input {
            background-color: #f9fafb;
            border: 1px solid #d1d5db;
            color: #1f2937;
            border-radius: 0.375rem;
            padding: 0.5rem 0.75rem;
            transition: all 0.2s ease-in-out;
        }

        .form-input::placeholder {
            color: #6b7280;
        }

        .form-input:focus {
            outline: none;
            box-shadow: 0 0 0 2px #4f46e5;
            border-color: #4f46e5;
        }

        /* Page transitions */
        .page {
            display: none;
        }

        .page.active {
            display: block;
            animation: fadeIn 0.5s ease-out forwards;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Custom styles for tables */
        .table-wrapper {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th,
        td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid rgba(200, 200, 200, 0.5);
        }

        thead th {
            background-color: rgba(236, 240, 241, 0.5);
            font-weight: 600;
            color: #374151;
        }

        tbody tr:hover {
            background-color: rgba(243, 244, 246, 0.4);
        }

        .action-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.1em;
            transition: color 0.2s;
            padding: 0;
        }

        .delete-btn {
            color: #ef4444;
        }

        .delete-btn:hover {
            color: #b91c1c;
        }

        .edit-btn {
            color: #f59e0b;
        }

        .edit-btn:hover {
            color: #b45309;
        }

        .action-btn:disabled {
            color: #9ca3af;
            cursor: not-allowed;
        }

        /* Gemini Button Style */
        .gemini-btn {
            background-color: transparent;
            color: #6366f1;
            border: 2px solid #6366f1;
            padding: 10px 15px;
            border-radius: 0.375rem;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 600;
            transition: all 0.3s;
        }

        .gemini-btn:hover {
            background-color: #6366f1;
            color: white;
            box-shadow: 0 4px 15px 0 rgba(99, 102, 241, 0.4);
            transform: translateY(-2px);
        }

        .loader {
            width: 48px;
            height: 48px;
            border: 5px solid #FFF;
            border-bottom-color: #4f46e5;
            border-radius: 50%;
            display: block;
            box-sizing: border-box;
            animation: rotation 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes rotation {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        /* Toast Animation */
        @keyframes toast-in {
            from {
                transform: translateX(100%);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .toast-enter {
            animation: toast-in 0.5s ease-out forwards;
        }

        .rotate-180 {
            transform: rotate(180deg);
        }

        details>summary {
            list-style: none;
        }

        details>summary::-webkit-details-marker {
            display: none;
        }

        /* Estilos do Menu de Monitores */
        #monitors-sidebar.collapsed {
            width: 0px;
            padding: 0;
            overflow: hidden;
            margin-left: -1.5rem;
            /* Compensa o gap */
        }

        #monitors-sidebar.collapsed .sidebar-content {
            opacity: 0;
        }

        #sidebar-toggle-btn.collapsed .fa-chevron-left {
            transform: rotate(180deg);
        }

        #monitors-sidebar-list a {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.5rem 0.75rem;
            border-radius: 0.375rem;
            transition: background-color 0.2s;
            cursor: pointer;
            text-decoration: none;
            color: #374151;
        }

        #monitors-sidebar-list a:hover {
            background-color: rgba(230, 230, 245, 0.7);
        }

        /* Abas de ConfiguraÃ§Ã£o de SalÃ¡rio */
        .config-tab-btn {
            padding: 0.5rem 1rem;
            font-weight: 600;
            border-radius: 0.375rem;
            transition: all 0.3s;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .config-tab-btn.active {
            background-color: white;
            color: #4f46e5;
            border-color: #4f46e5;
        }

        .config-tab-btn:not(.active) {
            background-color: transparent;
            color: #4b5563;
        }

        .config-tab-content {
            display: none;
        }

        .config-tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease-out;
        }
    </style>
</head>

<body>
    <canvas id="particles-js"></canvas>

    <div class="container mx-auto p-4 md:p-8 relative z-10">
        <header class="text-center mb-8 relative">
            <h1 class="text-4xl md:text-5xl header-title">GestÃ£o Financeira</h1>
            <p class="text-gray-500 mt-2">Aero & ABC Festas</p>
            <div class="absolute top-0 left-0 flex space-x-2 p-2">
                <button onclick="window.location.href='./Dashboard.html'"
                    class="bg-white/50 text-gray-600 w-10 h-10 rounded-full hover:bg-white/80 transition-colors"
                    title="Acessar Dashboard">
                    <i class="fa-solid fa-house"></i>
                </button>
            </div>
            <div class="absolute top-0 right-0 flex space-x-2 p-2">
                <button onclick="window.location.href='./Agenda de eventos.html'"
                    class="bg-white/50 text-gray-600 w-10 h-10 rounded-full hover:bg-white/80 transition-colors"
                    title="Acessar Agenda de Eventos">
                    <i class="fa-solid fa-calendar-days"></i>
                </button>
                <button onclick="window.location.href='./Sistema GestÃ£o Financeira.html'"
                    class="bg-white/50 text-gray-600 w-10 h-10 rounded-full hover:bg-white/80 transition-colors"
                    title="Acessar GestÃ£o Financeira">
                    <i class="fas fa-chart-line"></i>
                </button>
                <button onclick="window.location.href='./Sistema de CRM.html'"
                    class="bg-white/50 text-gray-600 w-10 h-10 rounded-full hover:bg-white/80 transition-colors"
                    title="Acessar CRM">
                    <i class="fas fa-users"></i>
                </button>
                <button id="settings-btn"
                    class="bg-white/50 text-gray-600 w-10 h-10 rounded-full hover:bg-white/80 transition-colors"
                    title="ConfiguraÃ§Ãµes">
                    <i class="fas fa-cog"></i>
                </button>
            </div>
        </header>

        <nav class="flex justify-center mb-8 space-x-1 md:space-x-2 flex-wrap">
            <button data-target="dashboard"
                class="nav-link active shiny-btn px-4 py-2 rounded-md text-sm md:text-base mb-2"><i
                    class="fa-solid fa-chart-pie mr-2"></i> Dashboard</button>
            <button data-target="entradas"
                class="nav-link bg-white/50 hover:bg-white/80 text-gray-700 font-semibold px-4 py-2 rounded-md transition-all duration-300 text-sm md:text-base mb-2"><i
                    class="fa-solid fa-calendar-check mr-2"></i> Entradas</button>
            <button data-target="gastos"
                class="nav-link bg-white/50 hover:bg-white/80 text-gray-700 font-semibold px-4 py-2 rounded-md transition-all duration-300 text-sm md:text-base mb-2"><i
                    class="fa-solid fa-cart-shopping mr-2"></i> Gastos</button>
            <button data-target="contas-fixas"
                class="nav-link bg-white/50 hover:bg-white/80 text-gray-700 font-semibold px-4 py-2 rounded-md transition-all duration-300 text-sm md:text-base mb-2"><i
                    class="fa-solid fa-file-invoice-dollar mr-2"></i> Contas Fixas</button>
            <button data-target="monitores"
                class="nav-link bg-white/50 hover:bg-white/80 text-gray-700 font-semibold px-4 py-2 rounded-md transition-all duration-300 text-sm md:text-base mb-2"><i
                    class="fa-solid fa-users mr-2"></i> Monitores</button>
            <button data-target="salarios"
                class="nav-link bg-white/50 hover:bg-white/80 text-gray-700 font-semibold px-4 py-2 rounded-md transition-all duration-300 text-sm md:text-base mb-2"><i
                    class="fa-solid fa-money-bill-wave mr-2"></i> SalÃ¡rios</button>
        </nav>

        <div class="month-filter-container glassmorphism p-4 rounded-lg mb-8 flex justify-center items-center gap-4">
            <button
                class="month-nav-btn bg-white/50 text-gray-600 w-10 h-10 rounded-full hover:bg-white/80 transition-colors font-bold text-lg"
                data-direction="-1">&lt;</button>
            <input type="month"
                class="month-filter form-input text-center font-semibold text-indigo-600 border-none shadow-inner"
                id="month-filter-global">
            <button
                class="month-nav-btn bg-white/50 text-gray-600 w-10 h-10 rounded-full hover:bg-white/80 transition-colors font-bold text-lg"
                data-direction="1">&gt;</button>
        </div>

        <main>
            <div id="page-dashboard" class="page active">
                <section id="dashboard" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="glassmorphism p-6 rounded-lg text-center">
                        <h3 class="font-semibold text-gray-600 mb-2"><i
                                class="fa-solid fa-arrow-up mr-2 text-emerald-500"></i>Receitas do MÃªs</h3>
                        <p id="total-receitas" class="text-4xl font-bold text-emerald-600">R$ 0,00</p>
                        <div id="receitas-comparison" class="text-xs mt-2 space-y-1"></div>
                    </div>
                    <div class="glassmorphism p-6 rounded-lg text-center">
                        <h3 class="font-semibold text-gray-600 mb-2"><i
                                class="fa-solid fa-arrow-down mr-2 text-red-500"></i>Despesas do MÃªs</h3>
                        <p id="total-despesas" class="text-4xl font-bold text-red-500">R$ 0,00</p>
                        <div id="despesas-comparison" class="text-xs mt-2 space-y-1"></div>
                    </div>
                    <div class="glassmorphism p-6 rounded-lg text-center">
                        <h3 class="font-semibold text-gray-600 mb-2"><i
                                class="fa-solid fa-scale-balanced mr-2 text-blue-500"></i>Saldo do MÃªs</h3>
                        <p id="saldo-total" class="text-4xl font-bold text-blue-600">R$ 0,00</p>
                        <div id="saldo-comparison" class="text-xs mt-2 space-y-1"></div>
                    </div>
                    <div class="glassmorphism p-6 rounded-lg text-center flex flex-col justify-center items-center">
                        <h3 class="font-semibold text-indigo-600 mb-3"><i class="fa-solid fa-brain mr-2"></i>AnÃ¡lise do
                            MÃªs (IA)</h3>
                        <button onclick="openChat('dashboard')" class="gemini-btn w-full">âœ¨ Gerar RelatÃ³rio</button>
                    </div>
                </section>
                <section id="charts-section" class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="glassmorphism p-6 rounded-lg">
                        <h3 class="text-center font-bold text-gray-700 mb-4">Receita por Empresa (MÃªs)</h3><canvas
                            id="empresas-chart"></canvas>
                    </div>
                    <div class="glassmorphism p-6 rounded-lg">
                        <h3 class="text-center font-bold text-gray-700 mb-4">DistribuiÃ§Ã£o de Despesas (MÃªs)</h3><canvas
                            id="despesas-gerais-chart"></canvas>
                    </div>
                    <div class="glassmorphism p-6 rounded-lg">
                        <h3 class="text-center font-bold text-gray-700 mb-4">Gastos & Compras (MÃªs)</h3><canvas
                            id="gastos-compras-chart"></canvas>
                    </div>
                    <div class="glassmorphism p-6 rounded-lg">
                        <h3 class="text-center font-bold text-gray-700 mb-4">Contas Fixas (MÃªs)</h3><canvas
                            id="contas-fixas-chart"></canvas>
                    </div>
                    <div class="glassmorphism p-6 rounded-lg lg:col-span-2">
                        <h3 class="text-center font-bold text-gray-700 mb-4">Pagamentos Monitores (MÃªs)</h3><canvas
                            id="pagamentos-monitores-chart"></canvas>
                    </div>
                    <div class="glassmorphism p-6 rounded-lg lg:col-span-2">
                        <h3 class="text-center font-bold text-gray-700 mb-4">Fluxo de Caixa DiÃ¡rio (MÃªs)</h3><canvas
                            id="daily-chart"></canvas>
                    </div>
                    <div class="glassmorphism p-6 rounded-lg lg:col-span-2">
                        <h3 class="text-center font-bold text-gray-700 mb-4">MÃ©dia Geral de Desempenho dos Monitores
                        </h3><canvas id="monitor-geral-performance-chart"></canvas>
                    </div>
                </section>
            </div>

            <div id="page-entradas" class="page">
                <section class="glassmorphism p-6 rounded-lg">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-2xl font-bold text-gray-800">Entradas Registradas no MÃªs</h2>
                        <button id="open-entrada-modal-btn" class="shiny-btn px-4 py-2 rounded-md"><i
                                class="fa-solid fa-plus mr-2"></i> Nova Entrada Manual</button>
                        <button id="export-entradas-pdf-btn" class="shiny-btn-red px-4 py-2 rounded-md mr-2">
                            <i class="fa-solid fa-file-pdf mr-2"></i> Exportar PDF
                        </button>

                    </div>
                    <p class="text-sm text-gray-500 mb-4">Entradas marcadas com ðŸ“… foram importadas automaticamente da
                        Agenda de Eventos.</p>
                    <div class="table-wrapper">
                        <table id="tabela-eventos">
                            <thead>
                                <tr>
                                    <th>Data</th>
                                    <th>Empresa</th>
                                    <th>Contratante</th>
                                    <th>Local</th>
                                    <th>Itens</th>
                                    <th>Valor Total</th>
                                    <th>AÃ§Ãµes</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </section>
            </div>

            <div id="page-gastos" class="page space-y-8">
                <section class="glassmorphism p-6 rounded-lg">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-2xl font-bold text-gray-800">Gastos Registrados no MÃªs</h2>
                        <div>
                            <button id="open-gasto-modal-btn" class="shiny-btn px-4 py-2 rounded-md mr-2"><i
                                    class="fa-solid fa-plus mr-2"></i> LanÃ§ar Novo Gasto</button>
                            <button id="export-gastos-pdf-btn"
                                class="shiny-btn-red px-4 py-2 rounded-md text-sm md:text-base mr-2">
                                <i class="fa-solid fa-file-pdf mr-2"></i> Exportar PDF
                            </button>
                            <button onclick="openChat('gastos')" class="gemini-btn"><i
                                    class="fa-solid fa-wand-magic-sparkles mr-2"></i>Analisar com IA</button>
                        </div>
                    </div>
                    <div class="table-wrapper">
                        <table id="tabela-gastos">
                            <thead>
                                <tr>
                                    <th>Data</th>
                                    <th>DescriÃ§Ã£o</th>
                                    <th>Categoria</th>
                                    <th>Conta</th>
                                    <th>Pagamento</th>
                                    <th>Valor</th>
                                    <th>AÃ§Ãµes</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </section>
                <section class="glassmorphism p-6 rounded-lg">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">Cadastro de Contas de SaÃ­da</h2>
                    <form id="form-cadastro-conta"
                        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 items-end">
                        <div><label for="cadastro-conta-nome" class="block text-sm font-medium text-gray-700">Nome da
                                Conta</label><input type="text" id="cadastro-conta-nome"
                                placeholder="Ex: Conta Principal" required class="form-input w-full mt-1"></div>
                        <div><label for="cadastro-conta-banco"
                                class="block text-sm font-medium text-gray-700">InstituiÃ§Ã£o/Banco</label><input
                                type="text" id="cadastro-conta-banco" placeholder="Ex: Banco Inter" required
                                class="form-input w-full mt-1"></div>
                        <div><label for="cadastro-conta-tipo"
                                class="block text-sm font-medium text-gray-700">Tipo</label><select
                                id="cadastro-conta-tipo" required class="form-input w-full mt-1">
                                <option>Conta Corrente</option>
                                <option>Conta PoupanÃ§a</option>
                                <option>Conta de Pagamentos</option>
                                <option>Outros</option>
                            </select></div>
                        <div><label for="cadastro-conta-agencia" class="block text-sm font-medium text-gray-700">AgÃªncia
                                (Opcional)</label><input type="text" id="cadastro-conta-agencia" placeholder="0001"
                                class="form-input w-full mt-1"></div>
                        <div><label for="cadastro-conta-numero" class="block text-sm font-medium text-gray-700">NÂº da
                                Conta (Opcional)</label><input type="text" id="cadastro-conta-numero"
                                placeholder="12345-6" class="form-input w-full mt-1"></div>
                        <button type="submit" class="shiny-btn py-2 rounded-md"><i class="fa-solid fa-save mr-2"></i>
                            Salvar Conta</button>
                    </form>
                    <h3 class="text-xl font-bold text-gray-800 mt-8 mb-4">Contas Cadastradas</h3>
                    <div class="table-wrapper">
                        <table id="tabela-contas-db">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>InstituiÃ§Ã£o</th>
                                    <th>Tipo</th>
                                    <th>AgÃªncia/Conta</th>
                                    <th>AÃ§Ãµes</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </section>

                <section class="glassmorphism p-6 rounded-lg">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">Gerenciamento de Categorias de Gastos</h2>
                    <form id="form-gasto-categoria" class="grid grid-cols-1 md:grid-cols-3 gap-4 items-end">
                        <div class="md:col-span-2">
                            <label for="gasto-categoria-nome" class="block text-sm font-medium text-gray-700">Nome da
                                Nova Categoria</label>
                            <input type="text" id="gasto-categoria-nome" placeholder="Ex: Limpeza" required
                                class="form-input w-full mt-1">
                        </div>
                        <button type="submit" class="shiny-btn py-2 rounded-md"><i class="fa-solid fa-save mr-2"></i>
                            Salvar Categoria</button>
                    </form>
                    <h3 class="text-xl font-bold text-gray-800 mt-8 mb-4">Categorias de Gastos Cadastradas</h3>
                    <div class="table-wrapper">
                        <table id="tabela-gasto-categorias-db">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>AÃ§Ãµes</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </section>
            </div>

            <div id="page-contas-fixas" class="page space-y-8">
                <section class="glassmorphism p-6 rounded-lg">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">Cadastrar Nova Conta Fixa</h2>
                    <form id="form-conta-fixa" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end">
                        <div><label for="conta-fixa-descricao"
                                class="block text-sm font-medium text-gray-700">DescriÃ§Ã£o</label><input type="text"
                                id="conta-fixa-descricao" required class="form-input w-full mt-1"
                                placeholder="Ex: Aluguel do galpÃ£o"></div>
                        <div><label for="conta-fixa-valor" class="block text-sm font-medium text-gray-700">Valor
                                (R$)</label><input type="number" id="conta-fixa-valor" step="0.01" required
                                class="form-input w-full mt-1" placeholder="750.00"></div>
                        <div><label for="conta-fixa-dia-vencimento" class="block text-sm font-medium text-gray-700">Dia
                                do Vencimento</label><input type="number" id="conta-fixa-dia-vencimento" min="1"
                                max="31" required class="form-input w-full mt-1" placeholder="10"></div>
                        <div>
                            <label for="conta-fixa-categoria"
                                class="block text-sm font-medium text-gray-700">Categoria</label>
                            <select id="conta-fixa-categoria" required class="form-input w-full mt-1">
                                <option value="">-- Selecione --</option>
                            </select>
                        </div>

                        <div>
                            <label for="conta-fixa-tipo-recorrencia"
                                class="block text-sm font-medium text-gray-700">Tipo de RecorrÃªncia</label>
                            <select id="conta-fixa-tipo-recorrencia" required class="form-input w-full mt-1">
                                <option value="permanente" selected>Permanente (ContÃ­nua)</option>
                                <option value="parcelada">Parcelada (Com Fim)</option>
                            </select>
                        </div>

                        <div id="conta-fixa-parcelamento-container"
                            class="hidden md:col-span-3 grid grid-cols-1 md:grid-cols-3 gap-4 items-end">
                            <div>
                                <label for="conta-fixa-data-inicio" class="block text-sm font-medium text-gray-700">MÃªs
                                    de InÃ­cio (YYYY-MM)</label>
                                <input type="month" id="conta-fixa-data-inicio" class="form-input w-full mt-1">
                            </div>
                            <div>
                                <label for="conta-fixa-num-parcelas" class="block text-sm font-medium text-gray-700">NÂº
                                    de Parcelas</label>
                                <input type="number" id="conta-fixa-num-parcelas" min="1" step="1"
                                    class="form-input w-full mt-1" placeholder="12">
                            </div>
                        </div>

                        <div class="lg:col-span-4">
                            <label for="conta-fixa-anexo" class="block text-sm font-medium text-gray-700">Anexar
                                Boletos/Faturas (Opcional)</label>
                            <input type="file" id="conta-fixa-anexo" multiple
                                class="form-input w-full mt-1 file:mr-4 file:py-1 file:px-2 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100">
                        </div>
                        <button type="submit" class="shiny-btn py-2 rounded-md lg:col-span-4"><i
                                class="fa-solid fa-plus mr-2"></i> Adicionar Conta Fixa</button>
                    </form>
                </section>
                <section class="glassmorphism p-6 rounded-lg">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">LanÃ§amento de Contas Fixas do MÃªs</h2>
                    <p class="text-sm text-gray-500 mb-4">Aqui sÃ£o listadas as contas (permanentes ou parcelas) ativas
                        para o mÃªs selecionado.</p>
                    <div class="table-wrapper">
                        <table id="tabela-contas-fixas-mes">
                            <thead>
                                <tr>
                                    <th>DescriÃ§Ã£o</th>
                                    <th>Valor Previsto</th>
                                    <th>Vencimento</th>
                                    <th>Status</th>
                                    <th>Valor Pago</th>
                                    <th>Data Pag.</th>
                                    <th class="text-center"><i class="fa-solid fa-paperclip"></i></th>
                                    <th>AÃ§Ã£o</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </section>

                <section class="glassmorphism p-6 rounded-lg">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">Gerenciamento de Categorias de Contas Fixas</h2>
                    <form id="form-conta-fixa-categoria" class="grid grid-cols-1 md:grid-cols-3 gap-4 items-end">
                        <div class="md:col-span-2">
                            <label for="cf-categoria-nome" class="block text-sm font-medium text-gray-700">Nome da Nova
                                Categoria</label>
                            <input type="text" id="cf-categoria-nome" placeholder="Ex: Impostos MEI" required
                                class="form-input w-full mt-1">
                        </div>
                        <button type="submit" class="shiny-btn py-2 rounded-md"><i class="fa-solid fa-save mr-2"></i>
                            Salvar Categoria</button>
                    </form>
                    <h3 class="text-xl font-bold text-gray-800 mt-8 mb-4">Categorias de Contas Fixas Cadastradas</h3>
                    <div class="table-wrapper">
                        <table id="tabela-cf-categorias-db">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>AÃ§Ãµes</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </section>

                <section class="glassmorphism p-6 rounded-lg">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">Contas Fixas Cadastradas (Banco de Dados)</h2>
                    <div class="table-wrapper">
                        <table id="tabela-contas-fixas-db">
                            <thead>
                                <tr>
                                    <th>DescriÃ§Ã£o</th>
                                    <th>Valor</th>
                                    <th>Dia Venc.</th>
                                    <th>Categoria</th>
                                    <th>RecorrÃªncia</th>
                                    <th>Anexos</th>
                                    <th>AÃ§Ãµes</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </section>
            </div>

            <div id="page-monitores" class="page">
                <div class="flex gap-6 relative">
                    <button id="sidebar-toggle-btn"
                        class="absolute top-4 -left-3 z-20 bg-white/80 w-8 h-8 rounded-full shadow-md flex items-center justify-center text-indigo-600 transition-transform duration-300 hover:scale-110">
                        <i class="fas fa-chevron-left transition-transform duration-300"></i>
                    </button>

                    <aside id="monitors-sidebar"
                        class="glassmorphism p-4 rounded-lg h-fit transition-all duration-300 ease-in-out w-72 flex-shrink-0">
                        <div
                            class="flex justify-between items-center mb-4 transition-opacity duration-300 sidebar-content">
                            <h3 class="text-xl font-bold text-gray-800">Monitores</h3>
                            <button id="add-monitor-btn"
                                class="shiny-btn rounded-full w-10 h-10 flex items-center justify-center"
                                title="Adicionar Novo Monitor">
                                <i class="fa-solid fa-plus"></i>
                        </div>
                        <div id="monitors-sidebar-list"
                            class="space-y-1 transition-opacity duration-300 sidebar-content">
                        </div>
                    </aside>

                    <main id="monitors-main-content" class="flex-grow space-y-8 transition-all duration-300">
                        <section class="glassmorphism p-6 rounded-lg">
                            <h3 class="text-xl font-bold text-gray-800 mb-4">Monitores Cadastrados</h3>
                            <p class="text-sm text-gray-500 mb-4">Veja detalhes, edite ou exclua um monitor clicando em
                                sua foto/nome no menu Ã  esquerda ou usando os botÃµes de aÃ§Ã£o abaixo.</p>
                            <div class="table-wrapper">
                                <table id="tabela-monitores-db">
                                    <thead>
                                        <tr>
                                            <th>Nome</th>
                                            <th>Possui CNH?</th>
                                            <th>MÃ©dia Desempenho</th>
                                            <th>AÃ§Ãµes</th>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </section>
                        <section class="glassmorphism p-6 rounded-lg">
                            <h3 class="text-xl font-bold text-gray-800 mb-4">Desempenho dos Monitores (MÃªs Selecionado)
                            </h3>
                            <div class="w-full h-80"><canvas id="monitor-event-performance-chart"></canvas></div>
                        </section>
                        <section class="glassmorphism p-6 rounded-lg">
                            <h2 class="text-2xl font-bold text-gray-800 mb-4">LanÃ§ar Pagamento & AvaliaÃ§Ã£o</h2>
                            <form id="form-pagamento-monitor" class="space-y-4">
                                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end">
                                    <div><label for="pagamento-monitor-data"
                                            class="block text-sm font-medium text-gray-700">Data do Evento</label><input
                                            type="date" id="pagamento-monitor-data" required
                                            class="form-input w-full mt-1"></div>
                                    <div class="lg:col-span-2"><label for="monitor-select"
                                            class="block text-sm font-medium text-gray-700">Selecione o
                                            Monitor</label><select id="monitor-select" required
                                            class="form-input w-full mt-1"></select></div>
                                    <div>
                                        <label for="pagamento-monitor-diaria"
                                            class="block text-sm font-medium text-gray-700">Valor da DiÃ¡ria</label>
                                        <select id="pagamento-monitor-diaria" required class="form-input w-full mt-1">
                                            <option value="80">R$ 80,00</option>
                                            <option value="90">R$ 90,00</option>
                                            <option value="100" selected>R$ 100,00</option>
                                            <option value="120">R$ 120,00</option>
                                            <option value="outro">Outro Valor</option>
                                        </select>
                                        <div id="pagamento-monitor-diaria-outro-wrapper" class="hidden mt-2">
                                            <input type="number" id="pagamento-monitor-diaria-outro"
                                                placeholder="Digite o valor" step="0.01" class="form-input w-full">
                                        </div>
                                    </div>
                                    <div><label for="pagamento-monitor-entrada"
                                            class="block text-sm font-medium text-gray-700">Hora Entrada</label><input
                                            type="time" id="pagamento-monitor-entrada" required
                                            class="form-input w-full mt-1"></div>
                                    <div><label for="pagamento-monitor-saida"
                                            class="block text-sm font-medium text-gray-700">Hora SaÃ­da</label><input
                                            type="time" id="pagamento-monitor-saida" required
                                            class="form-input w-full mt-1"></div>
                                    <div class="lg:col-span-2"><label for="pagamento-monitor-status"
                                            class="block text-sm font-medium text-gray-700">Status do
                                            Pagamento</label><select id="pagamento-monitor-status" required
                                            class="form-input w-full mt-1">
                                            <option value="Executado" selected>Executado</option>
                                            <option value="Pendente">Pendente</option>
                                        </select></div>

                                    <div class="lg:col-span-2 flex items-center pt-4">
                                        <input type="checkbox" id="pagamento-monitor-motorista"
                                            class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded">
                                        <label for="pagamento-monitor-motorista"
                                            class="ml-2 block text-sm text-gray-900">Adicional de Motorista?</label>
                                    </div>
                                    <div id="motorista-adicional-fields"
                                        class="hidden lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4 items-end">
                                        <div><label for="pagamento-monitor-eventos"
                                                class="block text-sm font-medium text-gray-700">NÂº Eventos
                                                Entregues</label><input type="number" id="pagamento-monitor-eventos"
                                                min="0" step="0.1" class="form-input w-full mt-1" value="0"></div>
                                        <p class="text-sm text-gray-600 pt-5 font-medium">Adicional: <span
                                                id="valor-adicional-motorista">R$ 0,00</span></p>
                                    </div>
                                </div>

                                <div id="pagamento-avaliacao-container" class="hidden border-t pt-4 mt-4">
                                    <h4 class="font-semibold text-gray-800 mb-2">AvaliaÃ§Ã£o de Desempenho do Evento</h4>
                                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-2">
                                        <div><label for="pagamento-nota-descricao"
                                                class="text-xs">Evento/DescriÃ§Ã£o</label><input type="text"
                                                id="pagamento-nota-descricao" class="form-input w-full text-sm p-1.5"
                                                placeholder="Ex: Festa da Maria"></div>
                                        <div id="pagamento-checklist-container"
                                            class="sm:col-span-2 border p-3 rounded-md bg-gray-50/50"></div>
                                        <div class="sm:col-span-2 text-right font-bold text-gray-700">Nota Calculada:
                                            <span id="pagamento-nota-calculada"
                                                class="text-indigo-600 text-lg">0.0</span> / 10
                                        </div>
                                        <div class="sm:col-span-2"><label for="pagamento-nota-obs"
                                                class="text-xs">ObservaÃ§Ãµes</label><textarea id="pagamento-nota-obs"
                                                class="form-input w-full text-sm p-1.5" rows="2"></textarea></div>
                                    </div>
                                </div>

                                <button type="submit" class="shiny-btn py-2.5 rounded-md w-full mt-4"><i
                                        class="fa-solid fa-calculator mr-2"></i> LanÃ§ar Pagamento e Salvar
                                    AvaliaÃ§Ã£o</button>
                            </form>
                            <h3 class="text-xl font-bold text-gray-800 mt-8 mb-4">HistÃ³rico de Pagamentos (MÃªs
                                Selecionado)</h3>
                            <div class="table-wrapper">
                                <table id="tabela-pagamentos-monitores">
                                    <thead>
                                        <tr>
                                            <th>Data</th>
                                            <th>Nome</th>
                                            <th>Valor Base</th>
                                            <th>Adicional Motorista</th>
                                            <th>Adicional HE</th>
                                            <th>Valor Total</th>
                                            <th>Status</th>
                                            <th>Nota Evento</th>
                                            <th>AÃ§Ãµes</th>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                            <button id="export-monitores-pdf-btn" class="shiny-btn-red px-4 py-2 rounded-md mr-2">
                                <i class="fa-solid fa-file-pdf mr-2"></i> Exportar PDF
                            </button>

                        </section>
                    </main>
                </div>
            </div>
            <div id="page-salarios" class="page space-y-8">
                <section class="glassmorphism p-6 rounded-lg">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-2xl font-bold text-gray-800">CÃ¡lculo de SalÃ¡rio</h2>
                        <button id="open-salarios-config-modal-btn" class="gemini-btn px-4 py-2 rounded-md">
                            <i class="fa-solid fa-gear mr-2"></i> ConfiguraÃ§Ãµes
                        </button>
                        <button id="export-salarios-pdf-btn" class="shiny-btn-red px-4 py-2 rounded-md">
                            <i class="fa-solid fa-file-pdf mr-2"></i> Exportar PDF
                        </button>
                    </div>

                    <div class="mb-6">
                        <label for="salario-funcionario-select"
                            class="block text-sm font-medium text-gray-700 mb-1">Selecionar FuncionÃ¡rio</label>
                        <select id="salario-funcionario-select" class="form-input w-full max-w-md"></select>
                    </div>

                    <div id="salario-calculo-container" class="hidden">
                        <h3 id="salario-nome-funcionario" class="text-xl font-bold text-gray-800 mb-6"></h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                            <div class="glassmorphism p-5 rounded-lg border border-indigo-100">
                                <h3 class="font-semibold text-gray-600 mb-2"><i
                                        class="fa-solid fa-arrow-up mr-2 text-emerald-500"></i>Entradas Totais (MÃªs)
                                </h3>
                                <p id="salario-total-entradas" class="text-3xl font-bold text-emerald-600">R$ 0,00</p>
                            </div>

                            <div class="glassmorphism p-5 rounded-lg border border-indigo-100">
                                <h3 class="font-semibold text-gray-600 mb-2"><i
                                        class="fa-solid fa-percentage mr-2 text-indigo-500"></i>ComissÃ£o Calculada</h3>
                                <p id="salario-comissao" class="text-3xl font-bold text-indigo-600">R$ 0,00</p>
                                <p id="salario-comissao-percentual" class="text-sm text-gray-500 mt-1">Faixa de 0%</p>
                            </div>

                            <div class="glassmorphism p-5 rounded-lg border-2 border-green-300 bg-green-50/30">
                                <h3 class="font-semibold text-gray-700 mb-2"><i
                                        class="fa-solid fa-sack-dollar mr-2 text-green-600"></i>SalÃ¡rio Total a Pagar
                                </h3>
                                <p id="salario-total-pagar" class="text-3xl font-bold text-green-700">R$ 0,00</p>
                            </div>
                        </div>

                        <div class="bg-white/50 p-6 rounded-lg">
                            <h3 class="text-xl font-bold text-gray-800 mb-4">Detalhamento do SalÃ¡rio</h3>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center p-3 bg-gray-50 rounded-md">
                                    <span class="text-gray-700">SalÃ¡rio Fixo</span>
                                    <span id="salario-fixo" class="font-bold text-gray-900">R$ 0,00</span>
                                </div>
                                <div class="flex justify-between items-center p-3 bg-gray-50 rounded-md">
                                    <span class="text-gray-700">Vale AlimentaÃ§Ã£o (VA)</span>
                                    <span id="salario-va" class="font-bold text-gray-900">R$ 0,00</span>
                                </div>
                                <div class="flex justify-between items-center p-3 bg-gray-50 rounded-md">
                                    <span class="text-gray-700">Vale Transporte (VT)</span>
                                    <span id="salario-vt" class="font-bold text-gray-900">R$ 0,00</span>
                                </div>
                                <div
                                    class="flex justify-between items-center p-3 bg-blue-50 border-l-4 border-blue-400 rounded-md">
                                    <span class="text-blue-800">ComissÃ£o (Baseada nas Entradas)</span>
                                    <span id="salario-comissao-detalhe" class="font-bold text-blue-800">R$ 0,00</span>
                                </div>
                                <div
                                    class="flex justify-between items-center p-4 bg-green-100 border-t-2 border-green-300 rounded-md mt-4">
                                    <span class="text-lg font-bold text-green-800">Total Bruto</span>
                                    <span id="salario-total-detalhe" class="text-xl font-extrabold text-green-800">R$
                                        0,00</span>
                                </div>
                            </div>

                            <div class="mt-8 text-center">
                                <button id="btn-lancar-salario"
                                    class="shiny-btn px-8 py-3 rounded-md text-lg font-semibold w-full md:w-auto">
                                    <i class="fa-solid fa-arrow-down-to-bracket mr-2"></i> LanÃ§ar SalÃ¡rio como Despesa
                                </button>
                                <p id="salario-lancado-msg" class="text-green-600 font-semibold mt-4 hidden">
                                    <i class="fa-solid fa-check-circle mr-2"></i> SalÃ¡rio jÃ¡ lanÃ§ado como despesa para
                                    este mÃªs.
                                </p>
                            </div>
                        </div>
                    </div>

                    <div id="salario-selecione-msg" class="text-center p-10 bg-white/50 rounded-lg">
                        <i class="fa-solid fa-user-check text-4xl text-gray-400 mb-4"></i>
                        <p class="font-semibold text-gray-600">Selecione um funcionÃ¡rio acima para calcular o salÃ¡rio.
                        </p>
                        <p class="text-sm text-gray-500 mt-2">NÃ£o hÃ¡ funcionÃ¡rios cadastrados? Use o botÃ£o <i
                                class="fa-solid fa-gear"></i> ConfiguraÃ§Ãµes.</p>
                    </div>

                </section>
            </div>
        </main>
    </div>

    <div id="add-entrada-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center hidden z-50 p-4">
        <div class="modal-box glassmorphism p-8 rounded-lg shadow-xl w-full max-w-4xl m-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-900">LanÃ§ar Nova Entrada Manual</h2>
                <button class="close-btn text-gray-500 hover:text-gray-800 text-2xl font-bold">&times;</button>
            </div>
            <form id="form-evento" class="space-y-4 pt-4">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div><label for="evento-data" class="block text-sm font-medium text-gray-700">Data</label><input
                            type="date" id="evento-data" required class="form-input w-full mt-1"></div>
                    <div><label for="evento-empresa"
                            class="block text-sm font-medium text-gray-700">Empresa</label><select id="evento-empresa"
                            required class="form-input w-full mt-1">
                            <option>Aero Festas</option>
                            <option>ABC Festas</option>
                        </select></div>
                    <div><label for="evento-contratante"
                            class="block text-sm font-medium text-gray-700">Contratante</label><input type="text"
                            id="evento-contratante" required class="form-input w-full mt-1"></div>
                    <div><label for="evento-local" class="block text-sm font-medium text-gray-700">Local</label><input
                            type="text" id="evento-local" required class="form-input w-full mt-1"></div>
                </div>
                <div class="border-t border-gray-200 pt-4">
                    <h4 class="font-semibold mb-2">Itens do Evento</h4>
                    <div class="grid grid-cols-1 md:grid-cols-12 gap-4 items-end">
                        <div class="md:col-span-7"><label for="item-nome"
                                class="block text-sm font-medium text-gray-700">Nome do Item</label><input type="text"
                                id="item-nome" class="form-input w-full mt-1"></div>
                        <div class="md:col-span-3"><label for="item-valor"
                                class="block text-sm font-medium text-gray-700">Valor (R$)</label><input type="number"
                                id="item-valor" step="0.01" class="form-input w-full mt-1"></div>
                        <button type="button" id="btn-add-item" class="md:col-span-2 shiny-btn py-2 rounded-md"><i
                                class="fa-solid fa-plus mr-2"></i> Add</button>
                    </div>
                    <ul id="itens-temp-list" class="mt-4 space-y-2"></ul>
                </div>
                <button type="submit" class="w-full shiny-btn py-2.5 rounded-md font-bold"><i
                        class="fa-solid fa-save mr-2"></i> Salvar Evento Completo</button>
            </form>
        </div>
    </div>

    <div id="add-gasto-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center hidden z-50 p-4">
        <div class="modal-box glassmorphism p-8 rounded-lg shadow-xl w-full max-w-4xl m-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-900">LanÃ§ar Novo Gasto</h2>
                <button class="close-btn text-gray-500 hover:text-gray-800 text-2xl font-bold">&times;</button>
            </div>
            <form id="form-gasto" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 items-end">
                <div><label for="gasto-data" class="block text-sm font-medium text-gray-700">Data</label><input
                        type="date" id="gasto-data" required class="form-input w-full mt-1"></div>
                <div><label for="gasto-descricao"
                        class="block text-sm font-medium text-gray-700">DescriÃ§Ã£o</label><input type="text"
                        id="gasto-descricao" required class="form-input w-full mt-1"></div>
                <div>
                    <label for="gasto-categoria" class="block text-sm font-medium text-gray-700">Categoria</label>
                    <select id="gasto-categoria" required class="form-input w-full mt-1">
                        <option value="">-- Selecione --</option>
                    </select>
                </div>
                <div><label for="gasto-conta" class="block text-sm font-medium text-gray-700">Conta de
                        SaÃ­da</label><select id="gasto-conta" required class="form-input w-full mt-1"></select></div>
                <div><label for="gasto-pagamento" class="block text-sm font-medium text-gray-700">Forma de
                        Pagamento</label><select id="gasto-pagamento" required class="form-input w-full mt-1">
                        <option>PIX</option>
                        <option>CartÃ£o de CrÃ©dito</option>
                        <option>Dinheiro</option>
                        <option>Boleto</option>
                    </select></div>
                <div><label for="gasto-valor" class="block text-sm font-medium text-gray-700">Valor (R$)</label><input
                        type="number" id="gasto-valor" step="0.01" required class="form-input w-full mt-1"></div>
                <button type="submit" class="shiny-btn py-2 rounded-md lg:col-span-3"><i
                        class="fa-solid fa-plus mr-2"></i> Adicionar Gasto</button>
            </form>
        </div>
    </div>

    <div id="lancamento-conta-fixa-modal"
        class="fixed inset-0 bg-black/50 flex items-center justify-center hidden z-50 p-4">
        <div class="modal-box glassmorphism p-8 rounded-lg shadow-xl w-full max-w-lg m-4">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-900">LanÃ§ar Pagamento de Conta Fixa</h2>
                <button class="close-btn text-gray-500 hover:text-gray-800 text-2xl font-bold">&times;</button>
            </div>
            <form id="form-lancamento-conta-fixa">
                <p class="text-gray-700 mb-4">Confirme ou altere os dados para o lanÃ§amento.</p>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700">DescriÃ§Ã£o</label>
                        <input type="text" id="lancamento-cf-descricao" class="form-input w-full mt-1 bg-gray-200"
                            readonly>
                    </div>
                    <div>
                        <label for="lancamento-cf-data" class="block text-sm font-medium text-gray-700">Data do
                            Pagamento</label>
                        <input type="date" id="lancamento-cf-data" required class="form-input w-full mt-1">
                    </div>
                    <div>
                        <label for="lancamento-cf-valor" class="block text-sm font-medium text-gray-700">Valor Pago
                            (R$)</label>
                        <input type="number" step="0.01" id="lancamento-cf-valor" required
                            class="form-input w-full mt-1">
                    </div>
                    <div>
                        <label for="lancamento-cf-conta" class="block text-sm font-medium text-gray-700">Conta de
                            SaÃ­da</label>
                        <select id="lancamento-cf-conta" required class="form-input w-full mt-1"></select>
                    </div>
                    <div>
                        <label for="lancamento-cf-comprovante" class="block text-sm font-medium text-gray-700">Anexar
                            Comprovantes (Opcional)</label>
                        <input type="file" id="lancamento-cf-comprovante" multiple
                            class="form-input w-full mt-1 file:mr-4 file:py-1 file:px-2 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100">
                    </div>
                </div>
                <button type="submit" class="shiny-btn w-full px-6 py-2 rounded-md mt-8"><i
                        class="fa-solid fa-check mr-2"></i>Confirmar LanÃ§amento</button>
            </form>
        </div>
    </div>

    <div id="add-monitor-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center hidden z-50 p-4">
        <div class="modal-box glassmorphism p-8 rounded-lg shadow-xl w-full max-w-4xl m-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-900">Cadastrar Novo Monitor</h2>
                <button
                    class="add-monitor-close-btn text-gray-500 hover:text-gray-800 text-2xl font-bold">&times;</button>
            </div>
            <form id="form-cadastro-monitor" class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 items-start pt-4">
                <div class="md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4">
                    <div><label for="cadastro-monitor-nome" class="block text-sm font-medium text-gray-700">Nome
                            Completo</label><input type="text" id="cadastro-monitor-nome" required
                            class="form-input w-full mt-1"></div>
                    <div><label for="cadastro-monitor-nascimento" class="block text-sm font-medium text-gray-700">Data
                            de Nascimento (Opcional)</label><input type="date" id="cadastro-monitor-nascimento"
                            class="form-input w-full mt-1"></div>
                    <div><label for="cadastro-monitor-telefone" class="block text-sm font-medium text-gray-700">Telefone
                            (WhatsApp)</label><input type="tel" id="cadastro-monitor-telefone"
                            placeholder="(62) 99999-9999" class="form-input w-full mt-1"></div>
                    <div><label for="cadastro-monitor-email"
                            class="block text-sm font-medium text-gray-700">Email</label><input type="email"
                            id="cadastro-monitor-email" placeholder="email@exemplo.com" class="form-input w-full mt-1">
                    </div>
                    <div class="md:col-span-2"><label for="cadastro-monitor-endereco"
                            class="block text-sm font-medium text-gray-700">EndereÃ§o</label><input type="text"
                            id="cadastro-monitor-endereco" class="form-input w-full mt-1"></div>
                    <div>
                        <label for="cadastro-monitor-cnh" class="block text-sm font-medium text-gray-700">Possui
                            CNH?</label>
                        <select id="cadastro-monitor-cnh" class="form-input w-full mt-1">
                            <option value="nao" selected>NÃ£o</option>
                            <option value="sim">Sim</option>
                        </select>
                    </div>
                    <div id="cadastro-monitor-cnh-categoria-wrapper" class="hidden">
                        <label for="cadastro-monitor-cnh-categoria"
                            class="block text-sm font-medium text-gray-700">Categoria CNH</label>
                        <input type="text" id="cadastro-monitor-cnh-categoria" class="form-input w-full mt-1"
                            placeholder="Ex: AB">
                    </div>
                    <div class="md:col-span-2">
                        <label for="cadastro-monitor-observacoes"
                            class="block text-sm font-medium text-gray-700">ObservaÃ§Ãµes</label>
                        <textarea id="cadastro-monitor-observacoes" class="form-input w-full mt-1" rows="3"
                            placeholder="AnotaÃ§Ãµes sobre o monitor..."></textarea>
                    </div>
                </div>
                <div class="md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4">
                    <div><label for="cadastro-monitor-perfil-foto" class="block text-sm font-medium text-gray-700">Foto
                            de Perfil</label><input type="file" id="cadastro-monitor-perfil-foto" accept="image/*"
                            class="form-input w-full mt-1 file:mr-4 file:py-1 file:px-2 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100">
                    </div>
                    <div><label for="cadastro-monitor-doc-foto" class="block text-sm font-medium text-gray-700">Foto do
                            Documento (CNH/RG)</label><input type="file" id="cadastro-monitor-doc-foto" accept="image/*"
                            class="form-input w-full mt-1 file:mr-4 file:py-1 file:px-2 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100">
                    </div>
                    <div class="flex items-start space-x-4">
                        <div>
                            <p class="text-xs text-center text-gray-600 mb-1">Preview Perfil</p>
                            <img id="perfil-foto-preview" src="https://placehold.co/128x128/e0e0e0/757575?text=Perfil"
                                class="w-32 h-32 object-cover rounded-full border p-1 bg-gray-50"
                                alt="PrÃ©-visualizaÃ§Ã£o do perfil">
                        </div>
                        <div>
                            <p class="text-xs text-center text-gray-600 mb-1">Preview Doc</p>
                            <img id="doc-foto-preview" src="https://placehold.co/128x128/e0e0e0/757575?text=Doc"
                                class="w-32 h-32 object-cover rounded-md border p-1 bg-gray-50"
                                alt="PrÃ©-visualizaÃ§Ã£o do documento">
                        </div>
                    </div>
                </div>
                <div class="md:col-span-2 border-t pt-4 mt-2">
                    <h4 class="font-semibold text-gray-800 mb-2">Habilidades Iniciais (0-10)</h4>
                    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4">
                        <div><label for="habilidade-forca"
                                class="block text-sm font-medium text-gray-700">ForÃ§a</label><input type="number"
                                id="habilidade-forca" min="0" max="10" step="1" value="5"
                                class="form-input w-full mt-1"></div>
                        <div><label for="habilidade-agilidade"
                                class="block text-sm font-medium text-gray-700">Agilidade</label><input type="number"
                                id="habilidade-agilidade" min="0" max="10" step="1" value="5"
                                class="form-input w-full mt-1"></div>
                        <div><label for="habilidade-proatividade"
                                class="block text-sm font-medium text-gray-700">Proatividade</label><input type="number"
                                id="habilidade-proatividade" min="0" max="10" step="1" value="5"
                                class="form-input w-full mt-1"></div>
                        <div><label for="habilidade-comunicacao"
                                class="block text-sm font-medium text-gray-700">ComunicaÃ§Ã£o</label><input type="number"
                                id="habilidade-comunicacao" min="0" max="10" step="1" value="5"
                                class="form-input w-full mt-1"></div>
                        <div><label for="habilidade-disponibilidade"
                                class="block text-sm font-medium text-gray-700">Disponibilidade</label><input
                                type="number" id="habilidade-disponibilidade" min="0" max="10" step="1" value="5"
                                class="form-input w-full mt-1"></div>
                        <div><label for="habilidade-respeito"
                                class="block text-sm font-medium text-gray-700">Respeito</label><input type="number"
                                id="habilidade-respeito" min="0" max="10" step="1" value="5"
                                class="form-input w-full mt-1"></div>
                    </div>
                </div>
                <button type="submit" class="md:col-span-2 shiny-btn py-2.5 rounded-md mt-2"><i
                        class="fa-solid fa-user-plus mr-2"></i> Salvar Monitor</button>
            </form>
        </div>
    </div>

    <div id="edit-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center hidden z-50 p-4">
        <div class="modal-box glassmorphism p-8 rounded-lg shadow-xl w-full max-w-2xl m-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 id="modal-title" class="text-2xl font-bold text-gray-900">Editar Item</h2>
                <button class="close-btn text-gray-500 hover:text-gray-800 text-2xl font-bold">&times;</button>
            </div>
            <form id="modal-form">
                <div id="modal-form-content" class="grid grid-cols-1 sm:grid-cols-2 gap-4"></div>
                <button type="submit" class="shiny-btn w-full px-6 py-2 rounded-md mt-8"><i
                        class="fa-solid fa-save mr-2"></i>Salvar AlteraÃ§Ãµes</button>
            </form>
        </div>
    </div>

    <div id="monitor-details-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center hidden z-50 p-4">
        <div
            class="modal-box glassmorphism p-6 md:p-8 rounded-lg shadow-xl w-full max-w-4xl m-4 max-h-[90vh] flex flex-col">
            <div class="flex justify-between items-center mb-4">
                <h2 id="monitor-details-title" class="text-2xl font-bold text-gray-900">Detalhes do Monitor</h2>
                <button
                    class="monitor-details-close-btn text-gray-500 hover:text-gray-800 text-2xl font-bold">&times;</button>
            </div>
            <div id="monitor-details-body" class="bg-white/60 p-4 rounded-md flex-grow overflow-y-auto">
            </div>
        </div>
    </div>

    <div id="attachment-viewer-modal"
        class="fixed inset-0 bg-black/60 flex items-center justify-center hidden z-50 p-4">
        <div class="modal-box glassmorphism p-6 rounded-lg shadow-xl w-full max-w-4xl m-4 max-h-[90vh] flex flex-col">
            <div class="flex justify-between items-center mb-4">
                <h2 id="attachment-viewer-title" class="text-2xl font-bold text-gray-900">Visualizar Anexos</h2>
                <button class="close-btn text-gray-500 hover:text-gray-800 text-2xl font-bold">&times;</button>
            </div>
            <div id="attachment-viewer-content"
                class="flex-grow overflow-y-auto bg-white/50 rounded p-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
            </div>
        </div>
    </div>

    <div id="salarios-config-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center hidden z-50 p-4">
        <div class="modal-box glassmorphism p-8 rounded-lg shadow-xl w-full max-w-4xl m-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-900">ConfiguraÃ§Ãµes de SalÃ¡rios</h2>
                <button class="close-btn text-gray-500 hover:text-gray-800 text-2xl font-bold">&times;</button>
            </div>

            <div class="mb-4 border-b border-gray-300/50 flex space-x-2">
                <button class="config-tab-btn active" data-target="config-tab-funcionarios">
                    <i class="fa-solid fa-user-tie mr-2"></i> FuncionÃ¡rios
                </button>
                <button class="config-tab-btn" data-target="config-tab-comissao">
                    <i class="fa-solid fa-percentage mr-2"></i> Faixas de ComissÃ£o
                </button>
            </div>

            <div id="config-tab-funcionarios" class="config-tab-content active space-y-6">
                <section>
                    <h3 class="text-xl font-bold text-gray-800 mb-4">Cadastrar Novo FuncionÃ¡rio</h3>
                    <form id="form-add-funcionario"
                        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end">
                        <div><label for="funcionario-nome"
                                class="block text-sm font-medium text-gray-700">Nome</label><input type="text"
                                id="funcionario-nome" required class="form-input w-full mt-1"
                                placeholder="Nome do FuncionÃ¡rio"></div>
                        <div><label for="funcionario-salario" class="block text-sm font-medium text-gray-700">SalÃ¡rio
                                Fixo (R$)</label><input type="number" id="funcionario-salario" step="0.01" required
                                class="form-input w-full mt-1" placeholder="2200.00"></div>
                        <div><label for="funcionario-va" class="block text-sm font-medium text-gray-700">Vale
                                AlimentaÃ§Ã£o (R$)</label><input type="number" id="funcionario-va" step="0.01" required
                                class="form-input w-full mt-1" placeholder="390.00"></div>
                        <div><label for="funcionario-vt" class="block text-sm font-medium text-gray-700">Vale Transporte
                                (R$)</label><input type="number" id="funcionario-vt" step="0.01" required
                                class="form-input w-full mt-1" placeholder="223.60"></div>
                        <button type="submit" class="shiny-btn py-2 rounded-md lg:col-span-4"><i
                                class="fa-solid fa-plus mr-2"></i> Adicionar FuncionÃ¡rio</button>
                    </form>
                </section>
                <section>
                    <h3 class="text-xl font-bold text-gray-800 mb-4">FuncionÃ¡rios Cadastrados</h3>
                    <div class="table-wrapper">
                        <table id="tabela-funcionarios-config">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>SalÃ¡rio Fixo</th>
                                    <th>VA</th>
                                    <th>VT</th>
                                    <th>AÃ§Ãµes</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </section>
            </div>

            <div id="config-tab-comissao" class="config-tab-content space-y-6">
                <section>
                    <h3 class="text-xl font-bold text-gray-800 mb-4">Adicionar Nova Faixa de ComissÃ£o</h3>
                    <form id="form-add-comissao" class="grid grid-cols-1 md:grid-cols-3 gap-4 items-end">
                        <div><label for="comissao-atevalor" class="block text-sm font-medium text-gray-700">Faturamento
                                ATÃ‰ (R$)</label><input type="number" id="comissao-atevalor" step="0.01" required
                                class="form-input w-full mt-1" placeholder="45000"></div>
                        <div><label for="comissao-percentual" class="block text-sm font-medium text-gray-700">Percentual
                                (%)</label><input type="number" id="comissao-percentual" step="0.1" required
                                class="form-input w-full mt-1" placeholder="2.5"></div>
                        <button type="submit" class="shiny-btn py-2 rounded-md"><i class="fa-solid fa-plus mr-2"></i>
                            Adicionar Faixa</button>
                    </form>
                    <p class="text-xs text-gray-500 mt-2">Dica: Para "acima de R$ 95.000", cadastre uma faixa com valor
                        "AtÃ©" muito alto (ex: 9999999).</p>
                </section>
                <section>
                    <h3 class="text-xl font-bold text-gray-800 mb-4">Faixas de ComissÃ£o Atuais</h3>
                    <div class="table-wrapper">
                        <table id="tabela-comissao-config">
                            <thead>
                                <tr>
                                    <th>Faturamento AtÃ© (R$)</th>
                                    <th>Percentual</th>
                                    <th>AÃ§Ãµes</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </section>
            </div>

        </div>
    </div>
    <div id="chat-fab"
        class="fixed bottom-6 right-6 shiny-btn rounded-full w-16 h-16 flex items-center justify-center cursor-pointer shadow-2xl transition-transform duration-300 hover:scale-110 z-40"
        title="Assistente IA">
        <i id="chat-fab-icon" class="fa-solid fa-chart-pie text-2xl"></i>
    </div>
    <div id="chat-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center hidden z-50 p-4">
        <div class="modal-box glassmorphism w-full max-w-lg h-[80vh] flex flex-col">
            <div class="flex justify-between items-center mb-4 border-b border-gray-200/50 pb-2">
                <h2 id="chat-title" class="text-xl font-bold text-gray-900">Assistente IA</h2>
                <button id="chat-close-btn"
                    class="text-gray-500 hover:text-gray-800 text-2xl font-bold">&times;</button>
            </div>
            <div id="chat-messages" class="flex-grow overflow-y-auto p-2 space-y-4">
            </div>
            <div class="mt-4 flex space-x-2">
                <input type="text" id="chat-input" class="form-input w-full" placeholder="FaÃ§a uma pergunta...">
                <button id="send-chat-btn" class="shiny-btn px-4 rounded-md"><i
                        class="fa-solid fa-paper-plane"></i></button>
            </div>
        </div>
    </div>

    <div id="api-key-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center hidden z-50">
        <div class="modal-box glassmorphism p-8 rounded-lg shadow-xl w-full max-w-md m-4">
            <h2 class="text-2xl font-bold mb-4 text-gray-900">Configurar API do Gemini</h2>
            <p class="text-sm text-gray-600 mb-6">Para usar os recursos de IA, vocÃª precisa de uma chave de API do
                Google AI Studio. A chave serÃ¡ salva apenas no seu navegador.</p>
            <div class="space-y-4">
                <div>
                    <label for="api-key-input" class="block text-sm font-medium text-gray-700 mb-1">Sua Chave da
                        API</label>
                    <input type="password" id="api-key-input" placeholder="Cole sua chave aqui"
                        class="form-input w-full px-3 py-2 rounded-md">
                </div>
            </div>
            <div class="flex justify-end space-x-4 mt-8">
                <button type="button" id="cancel-api-key-btn"
                    class="bg-gray-200 text-gray-800 px-6 py-2 rounded-md hover:bg-gray-300 transition-colors">Cancelar</button>
                <button type="button" id="save-api-key-btn" class="shiny-btn px-6 py-2 rounded-md">Salvar</button>
            </div>
        </div>
    </div>

    <div id="toast"
        class="fixed bottom-5 right-5 flex items-center text-white px-5 py-3 rounded-lg shadow-xl hidden transition-all duration-300 z-50">
        <i id="toast-icon" class="text-lg"></i>
        <p id="toast-message" class="ml-3"></p>
    </div>

    </script>

    <!-- Sistema de AutenticaÃ§Ã£o -->
    <script src="js/protect.js"></script>

</body>

</html>
